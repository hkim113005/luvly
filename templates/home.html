{% extends "layout.html" %}

{% block title %}
	Home
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" type="text/css" href="/static/home.css"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
{% endblock %}

{% block main %}
	<div class="heading_1">
		<div id="courses">
			<span>Courses</span>
		</div>
	</div>

	<div id="scrollable" style="height: calc(min(9.5vw, 200px) * 3 / 2 * {{ rows }} + min(9.5vw, 200px) * 1 / 4 * {{ rows - 1 }} + 3 / 2 * (min(200px, 15vw) + min(50px, 3vw) * 5 / 2));">
		{% for i in range(length) %}
		<a href=" ">
			<div id="course_box_{{ i + 1 }}" class="course_box">
				<div id="course_text_box_{{ i + 1 }}" class="course_text_box {{ completes[i] }}">
					<span class="course_first">{{ courses[i][2] }}</span>
					<span class="course_second">{{ courses[i][1] }}</span>
				</div>
			</div>
		</a>
		{% endfor %}
	</div>

    <script language="javascript">
		localStorage.clear();

        function set_space() {
            for (var i = 1; i <= {{ length }}; i++) {
                var box =  document.getElementById("course_box_" + i);
                var stylesheet = `
                    z-index: 4;
                    top: calc(min(200px, 15vw) + min(50px, 3vw) * 2);
                    left: 50%;`;
                if (i % 5 == 1) {
                    stylesheet += "\ntransform: translate(-300%, ";
                }
                else if (i % 5 == 2) {
                    stylesheet += "\ntransform: translate(-175%, ";
                }
                else if (i % 5 == 3) {
                    stylesheet += "\ntransform: translate(-50%, ";
                }
                else if (i % 5 == 4) {
                    stylesheet += "\ntransform: translate(75%, ";
                }
                else if (i % 5 == 0) {
                    stylesheet += "\ntransform: translate(200%, ";
                }

                stylesheet += "calc((min(9.5vw, 200px) * 3 / 2 + min(9.5vw, 200px) / 4) * " + (Math.floor((i - 1) / 5)) + "));";
                box.style = stylesheet;
            }

            var rows = {{ rows }};

            var scroll = document.getElementById("scrollable");
            var stylesheet = `
                overflow: auto;
                height: calc(min(9.5vw, 200px) * 3 / 2 * ${rows} + (min(9.5vw, 200px) * 1 / 8 + 10px) * ${ rows - 1 } + 6 / 4 * (min(200px, 15vw) + min(50px, 3vw) * 5 / 2));
            `;

            scroll.style = stylesheet;
        }

        set_space();

        $(window).resize(function() {
            set_space();
			setCurrentPage(currentPage);
        });

        window.addEventListener("load", () => {
			set_space();
		});
    </script>
{% endblock %}